# tic-tac-toe
Игра "Крестики-нолики" на Python. Учебный проект.

![image](https://user-images.githubusercontent.com/107473105/173610251-61397b7e-ba83-4a83-8f93-ad82e64e91a1.png)

# Описание
Простая реализация всем известной игры.

Интерфейс создавался с помощью **Tkinter**. Изображения сделаны в https://editor.method.ac/. Фавиконка в https://www.favicon.by/.

# Описание функций и объектов

### Импорты
Импорт библиотеки **Tkinter**, модулей **ttk**, **randint**, **choice** и **sleep**.


### Глобальные переменные
| Переменная | Значение по умолчанию | Описание |
|----:|:----:|:----|
|back|'#012835'|Цвет фона.|
|fore|'#00C9CC'|Цвет шрифта.|
|inactive|'#aaaaaa'|Цвет неактивного шрифта.|
|fontSize|14|Размер шрифта.|
|WIDTH|900|Ширина окна.|
|HEIGHT|600|Высота окна.|
|POS_X|root.winfo_screenwidth() // 2 - WIDTH // 2| Позиция окна по горизонтали.|
|POS_Y|root.winfo_screenheight() // 2 - HEIGHT // 2 - 20|Позиция окна по вертикали.|
|record|[0,0]|Список с текущим значением рекорда. Нулевой элемент - количество побед, первый - количество поражений. При запуске программы загружается из файла **record.dat**. В случае завершения раунда обновляется.|
|wins|0|Текущее количество побед.|
|loses|0|Текущее количество поражений.|
|level|0|Текущий раунд. Используется только  для вывода в информационное окно.|
|step|0|Текущий ход. Используется для ИИ.|
|currentMove|True|Текущий ход. **True** - ход игрока (первого игрока), **False** - ход компьютера (второго игрока).|
|state|True|Конфигурация вывода в информационное окно - вывод состояния.|
|log|False|Конфигурация вывода в информационное окно - вывод сообщения.|
|winsText|'Побед: '|Текст интерфейса.|
|losesText|'Поражений: '|Текст интерфейса.|
|winsText|'Побед первого игрока: '|Текст интерфейса.|
|losesText|'Побед второго игрока: '|Текст интерфейса.|
|diff|7|Сложность игры от **1** до **10**. Сложность определяет вероятность случайного хода.|
|dynamicOrder**|True|Определяет, изменяется ли очерёдность хода при игре с компьютером.|
|playGame|False|Начата ли игра.|
|enemyAI|True|Против ИИ ли игра.|
|root|Tk()|Главное окно игры.|
|bg_image|PhotoImage(file="bg_image.png")|Фоновое изображение|
|images|[[PhotoImage(file="y_cross.png"), PhotoImage(file="p_cross.png")], [PhotoImage(file="y_round.png"), PhotoImage(file="p_round.png")], PhotoImage(file="empty.png")|Список изображений фигур и пустого поля.|
|playerImage|[images[1][1], images[0][0]]|Изображения фигур игроков.|
|dataImage|[]|Двумерный список. Математическая модель игрового поля.|
|labelImage|[]|Двумерный список. Ярлыки изображений на игровом поле.|

### Функции
| Функция | Описание |
|----:|:----|
|startGame()|Начало игры. Присваивание переменным значений выбранных параметров, определение фигур и цветов игроков, деактивация возможности выбора параметров, вывод соответствующих сообщений.|        
|resetGame()|Сброс игры. Активация возможности выбора параметров, сброс игровых показателей, заполнение ячеек стартовым набором фигур, вывод соответствующих сообщений.|
|getRecord()|Получение рекорда из файла. Возвращает в формате списка [w, l], где "w" - количество побед, а "l" - количество поражений. В случае неудачи, вывод соответствующего сообщения в информационное окно и возврат [0, 0].|        
|saveRecord()|Сохранение рекорда. Если разность количества побед и количества поражений больше аналогичной разности в рекорде, то в файл рекорда записываются текущие показатели побед и поражений. Если файла не существует, он сооздаётся. Если запись не удалась, выводится соответствующее сообщение. Рекорд один для любой сложности, что несправедливо, но с учётом его малополезности в такой игре, этим можно пренебречь.|
|fairCheck()|Провека поля на ничью. Выполняется после каждого хода. Возвращает **True** в случае ничьи, или **False** в ином случае.|
|endGameCheck(x, y)|Проверка на победу. В качестве аргументов принимает координаты только что совершенного хода. Выполняется после каждого хода. В случае победы, запускает coloringVictory() и возвращает **True**, в ином случае возвращает **False**.|
|fair()|Ничья. Останавливает игру, выводит соответствующее сообщение, обновляет рекорд, изменяет текст кнопок.|
|victory()|Победа. Останавливает игру, в зависимости от того, чей ход, выводит соответствующее сообщение, обновляет рекорд, изменяет текст кнопок.|
|coloringVictory(direction, axis)|Подсвечивание победной строки, столбца или диагонали. Принимает два агрумента. Аргумент **direction** - направление. Может быть "-" - строка, "&#124;" - столбец, "/" и "&#92;" - диагонали. Аргумент **axis** - номер строки, либо номер столбца.|
|move(x, y)|Ход Игрока. Проводится проверка, с кем ведётся игра, чей ход, какая ячейка выбрана. В зависимости от этих условий выводятся соответствующий сообщения в информационное окно, меняется изображение в ячейке, меняются данные в математической модели, проводится проверка на победу и ничью, ход передаётся другому игроку.|
|AI()|Запуск логики ИИ. ИИ в игре далеко не идеален - осознанно обрабатывает не более чем два первых хода, но из-за специфики игры, решающее значение имеют именно первые ходы. Сложность игры определяет только вероятность, с которой ИИ совершит "обдуманный ход", а не случайный. Сложность влияет на каждое действие ИИ. Логика следущая: если уже более чем третий ход, то прежде всего проверяется, можно ли выиграть этим ходом. Если можно, совершается победный ход. Если нет, проверяется, может ли противник (игрок) выиграть следующим ходом. Если да, совершается ход, мешающий победе противника. Если условия победы и поражения ложны, проверяется, какой сейчас игровой ход. Если первый, второй, третий или четвёртый, то совершается ход, подходящий под данную ситуацию. Если ни одно из условий не было истинным, совершается случайный ход. Чаще всего на данном этапе уже видны победные ходы, но по сути затягивая игру, можно "обезаружить" ИИ, вынуждая его ходить случайно.|
|randomStep_AI()|Функция анализирует наличие пустых клеток и возвращает случайную из них в виде списка из двух координат -[x, y]. Используется, когда ИИ не сумел отреагировать на ситуацию, либо когда "ошибся".|
|oneStepWinCheck_AI()|Проверка, может ли ИИ победить текущим ходом. Проверяются сначала горизонтальные строки, затем вертикальные, затем диагонали. Если в одну из строк можно совершить победный ход, запускается проверка вычисления координат хода и возвращается результат выполнения функции analyzeWinString_AI(). Если победный ход не обнаружен, возвращается значение [False, None, None].|
|analyzeWinString_AI(direction, axis)|Анализ строки, столбца или диагонали на выявление пустого поля. Принимает два агрумента. Аргумент **direction** - направление. Может быть "-" - строка, "&#124;" - столбец, "/" и "&#92;" - диагонали. Аргумент **axis** - номер строки, либо номер столбца. Возвращает список вида[True, x, y], где **True** - маркер того, что ход победный, а **x** и **y** - координаты хода.|
|oneStepLoseCheck_AI()|Проверка, может ли Игрок победить слудующим ходом. Проверяются сначала горизонтальные строки, затем вертикальные, затем диагонали. Если в одну из строк игрок сможет совершить победный ход, запускается проверка вычисления координат хода и возвращается результат выполнения функции analyzeWinString_AI(). Если победный ход игрока не обнаружен, возвращается значение [False, None, None].|
|analyzeLoseString_AI(direction, axis)|Анализ строки, столбца или диагонали на выявление пустого поля. Принимает два агрумента. Аргумент **direction** - направление. Может быть "-" - строка, "&#124;" - столбец, "/" и "&#92;" - диагонали. Аргумент **axis** - номер строки, либо номер столбца. Возвращает список вида[True, x, y], где **True** - маркер того, что ход победный, а **x** и **y** - координаты хода.|
|step_AI(x, y)|Ход ИИ. В качестве аргументов принимает коодинаты хода. Перед ходом выжидается пауза в 1-2 секунды, имитирующая мыслительный процесс. Изменяется изображение в ячейке, изменяется значение в модели игрового поля, меняется значение переменных **currentMove** и **step**, выводится сообщение в информационное окно. После хода выполняется сначала проверка на победу ИИ, затем на ничью. В случае истинности одной из проверок запускается соответствующая функция.|
|updateText()|Обновление отображения игровых показателей.|
|logInsert(action, text)|Вывод сообщения в информационное окно. Принимает два агрумента. В аргумент **action** передаётся либо переменная **state**, либо **log**. Аргумент определяет тип оформления вывода сообщения. Оформление формируется динамически в зависимости от длины собщения. В агрумент **text** передаётся текст сообщения.|
|deactMoveOrderLabel(event)|Активация и деактивация поля выбора сложности и очерёдности хода в зависимости от выбора противника.|
|shapeChange(box)|Изменения фигуры игрока, при выборе фигуры другого. Исключается игра двумя одинаковыми фигурами.|

### Элементы интерфейса
| Элкмент | Описание |
|----:|:----|
|backgroundLabel|Метка фонового изображения|
|enemyLabel|Текстовая метка.|
|moveOrderLabel|Текстовая метка.|
|diffLabel|Текстовая метка.|
|colorLabel01|Текстовая метка.|
|colorLabel02|Текстовая метка.|
|shapeLabel01|Текстовая метка.|
|shapeLabel02|Текстовая метка.|
|enemyBox|Комбинированный список выбора противника.|
|moveOrderBox|Комбинированный список выбора очерёдности хода.|
|difficultyBox|Комбинированный список выбора уровня сложности.|
|player1ColorBox|Комбинированный список выбора цвета фигуры первого игрока.|
|player2ColorBox|Комбинированный список выбора цвета фигуры второго игрока.|
|player1ShapeBox|Комбинированный список выбора фигуры первого игрока.|
|player2ShapeBox|Комбинированный список выбора фигуры второго игрока.|
|startButton|Кнопка начала игры.|
|resetButton|Кнопка сброса игры.|
|win1Label|Текстовая метка.|
|win2Label|Текстовая метка.|
|recordLabel|Текстовая метка.|
|logPanel|Информационное окно.|

# Блок-схема логики ИИ
Прошу обратить внимание, что на схеме представлена именно логика ИИ, а не реализация в коде.
![diagram](https://user-images.githubusercontent.com/107473105/174241616-a57cda1c-9023-4404-a936-8205d17c5bee.png)

# Спасибо за внимание.
